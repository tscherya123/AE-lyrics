# AE Lyrics Sync

AE Lyrics Sync — це десктопний CLI-інструмент для автоматичного вирівнювання рядків пісенної лірики з аудіозаписом та генерації синхронізованого файлу субтитрів у форматі SRT. Інструмент працює офлайн, не потребує ручного налаштування параметрів і надає короткий звіт після обробки.

## Можливості

- Розпізнавання мовлення з таймкодами слів за допомогою моделі [faster-whisper](https://github.com/guillaumekln/faster-whisper).
- Автоматична реконструкція таймкодів слів, якщо вихідні таймштампи моделі ненадійні.
- Вирівнювання кожного рядка лірики з найкращим відрізком розпізнаних слів із фіксацією старту субтитра.
- Розв'язання конфліктів тривалостей шляхом підрізання попереднього субтитра та гарантія мінімальної тривалості.
- Евристичні таймінги для рядків, які не вдалося зіставити автоматично.
- Генерація SRT із атомарним збереженням та короткий текстовий звіт.

## Встановлення

```bash
pip install .
```

Для досягнення максимальної якості система за замовчуванням використовує модель `large-v3` у `float16` режимі (з автоматичним переходом на сумісні типи обчислень за потреби). За бажанням можна попередньо завантажити модель, щоб пришвидшити перший запуск.

## Використання

```bash
python -m lyrics_sync.cli /path/to/song.mp3 /path/to/lyrics.txt --output synced.srt
```

Після завершення роботи виводиться короткий звіт із кількістю рядків, відсотком автоматично вирівняних та попередженнями.

## Формат вхідних даних

- **Аудіо:** WAV, MP3, FLAC та інші формати, які підтримує `ffmpeg`.
- **Лірика:** UTF-8 текстовий файл, де кожен рядок є окремим субтитром. Порожні рядки ігноруються.

## Формат вихідних даних

- **SRT:** стандартна розмітка, індекси починаються з 1, таймкоди у форматі `HH:MM:SS,ms`.

## Ліцензія

Цей проєкт розповсюджується за ліцензією MIT.
